---
title: "google ML cloud deployment"
output: html_notebook
---

This script deploys selected file to google ML cloud.
TODO: create the list of files to train with their config yml files.

```{r}
googleJob5layer <- cloudml_train("5layersAllIn.R", config = "5layersTuning.yml")
#googleJob3layer <- cloudml_train("3layersAllIn.R", config = "3layersTuning.yml", flags = "FLAGS_THREE"3layerFlags.yml")
#googleJobTest <- cloudml_train("test.R", config = "test.yml")

```

Reading job status from google. Can be run during tranning to observe learning process.
```{r}
job_status(googleJobTest)
```

Collecting job result.
```{r}

job_collect(googleJobTest)
```


Synchronize data in local and remote google folders
```{r}
gs_copy("data", "gs://anomaly_detection_data")
```

reading data from remote storage
```{r}
data_dir <- gs_data_dir("gs://anomaly_detection_data")
x_train <- file.path(data_dir, "train_data.csv")
```


get predictions of given data on specified model.
```{r}
cloudml_predict(instances = "test_data", name = "model_name", verbose = TRUE)
